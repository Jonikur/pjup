/// <reference path="../definitions/ref.d.ts" />
/**
* Bundles the imports and exports of the file.
* @param file The file
*/
function combine(f) {
    var imports = f.getSimpleImportNodes();
    var exports = f.getSingleExportNodes();
    var fullExports = f.getFullExportNodes();

    var findImport = function (def) {
        for (var i = 0; i < imports.length; ++i) {
            var imp = imports[i];

            if (imp.safe && imp.varAst.thedef === def) {
                return imp;
            }
        }
        return undefined;
    };

    if (fullExports.length === 1) {
        fullExports[0].importNode = findImport(fullExports[0].def);
    } else if (fullExports.length === 0) {
        for (var i = 0; i < exports.length; ++i) {
            var exp = exports[i];
            exp.importNode = findImport(exp.def);
        }
    }
}
exports.combine = combine;
